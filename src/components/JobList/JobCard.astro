---
import type { JobType } from "types/jobs";
import { getMonthsBetweenDates } from "@utils/getMonthsBetweenDates";
import { formatTimestamp } from "@utils/formatTimestamp";
import Text from "@components/Text.astro";
import TechnologiesList from "@components/TechnologiesList/index.astro";
import { parseTags } from "@services/tags";

interface Props {
  job: JobType;
}

const {
  job: { position, type, from, to, description, stack, logo, company },
} = Astro.props;

const technologies = await parseTags({ tags: stack });
---

<li
  class="flex flex-col gap-8 px-4 py-8 border-2 rounded-sm sm:px-8 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800"
>
  <div
    class="flex flex-col items-center justify-between w-full gap-4 md:flex-row"
  >
    <img class="h-8" src={logo} alt={`${company}-logo`} />
    <Text>{position} ~ {type}</Text>
  </div>

  <div class="flex flex-col items-center gap-x-4 sm:flex-row">
    <Text size="p2">
      <time
        >{formatTimestamp({ timestamp: from })} ~ {
          formatTimestamp({ timestamp: to })
        }</time
      >
    </Text>
    <Text size="p4" class="text-zinc-500 dark:text-zinc-400">
      ({getMonthsBetweenDates(from, to)} months)
    </Text>
  </div>
  <Text>
    {description}
  </Text>
  <div class="flex items-start gap-8">
    <Text size="p4" class="font-bold font-heming">STACK</Text>

    <TechnologiesList {technologies} />
  </div>
</li>
